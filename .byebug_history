c
n
c
n
c
content_text
n
c
n
c
content_text
n
response
c
content_text
response
n
N
c
n
content_text
n
content_text
response
prompt
c
n
response_text
response_data
n
c
n
response
c
response
n
c
response
response.dig
content_text
n
c
content_text
n
c
content_text
n
c
n
c
response_text
emotional_type
emotional_type\
response_text
n
content_text
n
c
n
c
n
c
{'response': 'That\'s great to know your flower finally bloomed. You must be very happy about it.', 'emotional_type': 'smile'}.class
JSON.parse(content_text)
content_text.class
content_text
n
c
n
c
response
c
params
c
response
n
c
response
n
response.success?
response
n
c
api_key
c
ENV['GOOGLE_API_KEY']
c
ENV
api_key
c
api_key
c
ENV
api_key
c
ENV['GOOGLE_API_KEY']
c
n
c
ENV
ENV['GOOGLE_API_KEY']
api_key
n
c
n
c
n
c
params[:voice_input]
voice
voice.present?
n
c
params
c
params
c
params
c
description
n
c
n
emoji_descriptions
n
emotion
c
n
c
params
c
n
params
